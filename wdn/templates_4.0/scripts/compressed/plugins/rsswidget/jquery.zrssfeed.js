!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof module&&module.exports?require("jquery"):jQuery)}(function(e){e.fn.rssfeed=function(r,a,i){var n={limit:10,offset:1,header:!0,titletag:"h4",date:!0,dateformat:"datetime",content:!0,snippet:!0,media:!0,showerror:!0,errormsg:"",key:null,ssl:!1,linktarget:"_self",linkredirect:"",linkcontent:!1,sort:"",sortasc:!0,historical:!1},a=e.extend(n,a);return this.each(function(n,o){var s=e(o),l="";if(a.ssl&&(l="s"),s.hasClass("rssFeed")||s.addClass("rssFeed"),null==r)return!1;a.offset>0&&(a.offset-=1),a.limit+=a.offset;var d="http"+l+"://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&q="+encodeURIComponent(r);d+="&num="+a.limit,a.historical&&(d+="&scoring=h"),null!=a.key&&(d+="&key="+a.key),d+="&output=json_xml",e.getJSON(d,function(r){if(200==r.responseStatus)t(o,r.responseData,a),e.isFunction(i)&&i.call(this,s);else{if(a.showerror)if(""!=a.errormsg)var n=a.errormsg;else var n=r.responseDetails;e(o).html('<div class="rssError"><p>'+n+"</p></div>")}})})};var t=function(t,i,n){var l=i.feed;if(!l)return!1;var d=[],c=0,f="",u="odd";if(n.media)var h=o(i.xmlString),m=h.getElementsByTagName("item");n.header&&(f+='<div class="rssHeader"><a href="'+l.link+'" title="'+l.description+'">'+l.title+"</a></div>"),f+='<div class="rssBody"><ul>';for(var v=n.offset;v<l.entries.length;v++){c=v-n.offset,d[c]=[];var g,p=l.entries[v],M="",k=p.link;switch(n.sort){case"title":M=p.title;break;case"date":M=p.publishedDate}if(d[c].sort=M,p.publishedDate){var y=new Date(p.publishedDate),g=y.toLocaleDateString()+" "+y.toLocaleTimeString();switch(n.dateformat){case"datetime":break;case"date":g=y.toLocaleDateString();break;case"time":g=y.toLocaleTimeString();break;case"timeline":g=s(y);break;default:g=a(y,n.dateformat)}}if(n.linkredirect&&(k=encodeURIComponent(k)),d[c].html="<"+n.titletag+'><a href="'+n.linkredirect+k+'" title="View this feed at '+l.title+'">'+p.title+"</a></"+n.titletag+">",n.date&&g&&(d[c].html+="<div>"+g+"</div>"),n.content){if(n.snippet&&""!=p.contentSnippet)var w=p.contentSnippet;else var w=p.content;n.linkcontent&&(w='<a href="'+n.linkredirect+k+'" title="View this feed at '+l.title+'">'+w+"</a>"),d[c].html+="<p>"+w+"</p>"}if(n.media&&m.length>0){var D=m[v].getElementsByTagName("enclosure");if(D.length>0){d[c].html+='<div class="rssMedia"><div>Media files</div><ul>';for(var b=0;b<D.length;b++){var S=D[b].getAttribute("url"),x=D[b].getAttribute("type"),j=D[b].getAttribute("length");d[c].html+='<li><a href="'+S+'" title="Download this media">'+S.split("/").pop()+"</a> ("+x+", "+r(j)+")</li>"}d[c].html+="</ul></div>"}}}n.sort&&d.sort(function(e,t){if(n.sortasc)var r=e.sort,a=t.sort;else var r=t.sort,a=e.sort;return"date"==n.sort?new Date(r)-new Date(a):(r=r.toLowerCase(),a=a.toLowerCase(),a>r?-1:r>a?1:0)}),e.each(d,function(e){f+='<li class="rssRow '+u+'">'+d[e].html+"</li>",u="odd"==u?"even":"odd"}),f+="</ul></div>",e(t).html(f),e("a",t).attr("target",n.linktarget)},r=function(e){var t=["bytes","kb","MB","GB","TB","PB"],r=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,Math.floor(r))).toFixed(2)+" "+t[r]},a=function(e,t){var r=new Date(e);return e=t,e=e.replace("dd",i(r.getDate())),e=e.replace("MMMM",n(r.getMonth())),e=e.replace("MM",i(r.getMonth()+1)),e=e.replace("yyyy",r.getFullYear()),e=e.replace("hh",i(r.getHours())),e=e.replace("mm",i(r.getMinutes())),e=e.replace("ss",i(r.getSeconds()))},i=function(e){return e+="",e.length<2&&(e="0"+e),e},n=function(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return t[e]},o=function(e){var t,r=navigator.appName;return"Microsoft Internet Explorer"==r?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t},s=function(e){var t=new Date,r=new Date(e),a=Math.round((t.getTime()-r.getTime())/1e3);if(60>a)return"< 1 min";if(3600>a)var i=Math.round(a/60)-1,n="min";else if(86400>a)var i=Math.round(a/3600)-1,n="hour";else if(604800>a)var i=Math.round(a/86400)-1,n="day";else var i=Math.round(a/604800)-1,n="week";return i>1&&(n+="s"),i+" "+n}});
//# sourceMappingURL=jquery.zrssfeed.js.map